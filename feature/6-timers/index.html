<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Ivan Pepelnjak, ipSpace.net AG">
        <link rel="canonical" href="https://isis.bgplabs.net/feature/6-timers/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Adjust IS-IS Timers &#171; IS-IS Labs</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">IS-IS Labs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Home</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../.." class="dropdown-item">Labs Overview</a>
</li>
                                    
<li>
    <a href="../../99-about/" class="dropdown-item">About the Project</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Installation</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../1-setup/" class="dropdown-item">Installation and Setup</a>
</li>
                                    
<li>
    <a href="../../4-codespaces/" class="dropdown-item">Use GitHub Codespaces</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Basics</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../basic/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../../basic/0-frrouting/" class="dropdown-item">Configuring IS-IS on FRRouting</a>
</li>
                                    
<li>
    <a href="../../basic/1-simple-ipv4/" class="dropdown-item">Configure IS-IS Routing for IPv4</a>
</li>
                                    
<li>
    <a href="../../basic/2-explore/" class="dropdown-item">Explore IS-IS Data Structures</a>
</li>
                                    
<li>
    <a href="../../basic/3-p2p/" class="dropdown-item">IS-IS on Point-to-Point Links</a>
</li>
                                    
<li>
    <a href="../../basic/4-metric/" class="dropdown-item">Using IS-IS Metrics</a>
</li>
                                    
<li>
    <a href="../../basic/5-ipv6/" class="dropdown-item">Dual-Stack (IPv4+IPv6) IS-IS Routing</a>
</li>
                                    
<li>
    <a href="../../basic/6-level-2/" class="dropdown-item">Optimize Simple IS-IS Deployments</a>
</li>
                                    
<li>
    <a href="../../basic/7-unnumbered/" class="dropdown-item">Running IS-IS Over Unnumbered/LLA-only Interfaces</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Features</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../1-passive/" class="dropdown-item">Passive IS-IS Interfaces</a>
</li>
                                    
<li>
    <a href="../2-dis/" class="dropdown-item">Influence the Designated IS Election</a>
</li>
                                    
<li>
    <a href="../3-md5/" class="dropdown-item">Protect IS-IS Routing Data with MD5 Authentication</a>
</li>
                                    
<li>
    <a href="../4-hide-transit/" class="dropdown-item">Hide Transit Subnets in IS-IS Networks</a>
</li>
                                    
<li>
    <a href="../5-drain/" class="dropdown-item">Drain Traffic Before Node Maintenance</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Adjust IS-IS Timers</a>
</li>
                                    
<li>
    <a href="../7-redistribute/" class="dropdown-item">Route Redistribution into IS-IS</a>
</li>
                                    
<li>
    <a href="../8-bfd/" class="dropdown-item">Use BFD to Speed Up IS-IS Failure Detection</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Advanced</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../advanced/1-multilevel/" class="dropdown-item">Multilevel IS-IS Deployments</a>
</li>
                                    
<li>
    <a href="../../advanced/2-route-leak/" class="dropdown-item">Distributing Level-2 IS-IS Routes into Level-1 Areas</a>
</li>
                                    
<li>
    <a href="../../advanced/3-summarization/" class="dropdown-item">Summarizing Level-1 Routes into Level-2 Backbone</a>
</li>
                                    
<li>
    <a href="../../advanced/4-suboptimal/" class="dropdown-item">Suboptimal IS-IS Intra-area Routing</a>
</li>
                                    
<li>
    <a href="../../advanced/10-sr/" class="dropdown-item">Build an SR-MPLS Network with IS-IS</a>
</li>
                                    
<li>
    <a href="../../advanced/11-ti-lfa/" class="dropdown-item">Configure IS-IS Fast Reroute Using TI-LFA</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Upcoming</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../3-upcoming/" class="dropdown-item">Overview</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../5-drain/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../7-redistribute/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>

                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3">
<div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
  <div class="navbar-header">
      <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
          <span class="fa fa-angle-down"></span>
      </button>
  </div>

  
  
  
  
  
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary"  style="margin-bottom: 1em;">
      <ul class="nav flex-column">
          
      <li class="nav-item" data-level="1"><a href="#adjust-is-is-timers" class="nav-link">Adjust IS-IS Timers</a>
        <ul class="nav flex-column">
      <li class="nav-item" data-level="2"><a href="#device-requirements" class="nav-link">Device Requirements</a>
        <ul class="nav flex-column">
        </ul>
      </li>
      <li class="nav-item" data-level="2"><a href="#starting-the-lab" class="nav-link">Starting the Lab</a>
        <ul class="nav flex-column">
        </ul>
      </li>
      <li class="nav-item" data-level="2"><a href="#initial-state" class="nav-link">Initial State</a>
        <ul class="nav flex-column">
        </ul>
      </li>
      <li class="nav-item" data-level="2"><a href="#configuration-tasks" class="nav-link">Configuration Tasks</a>
        <ul class="nav flex-column">
        </ul>
      </li>
      <li class="nav-item" data-level="2"><a href="#validation" class="nav-link">Validation</a>
        <ul class="nav flex-column">
        </ul>
      </li>
      <li class="nav-item" data-level="2"><a href="#beyond-neighbor-hold-times" class="nav-link">Beyond Neighbor Hold Times</a>
        <ul class="nav flex-column">
        </ul>
      </li>
      <li class="nav-item" data-level="2"><a href="#reference-information" class="nav-link">Reference Information</a>
        <ul class="nav flex-column">
      <li class="nav-item" data-level="3"><a href="#lab-wiring" class="nav-link">Lab Wiring</a>
        <ul class="nav flex-column">
        </ul>
      </li>
      <li class="nav-item" data-level="3"><a href="#lab-addressing" class="nav-link">Lab Addressing</a>
        <ul class="nav flex-column">
        </ul>
      </li>
        </ul>
      </li>
        </ul>
      </li>
      </ul>
    </div>
  
  
  
  
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="adjust-is-is-timers">Adjust IS-IS Timers</h1>
<p>Like any other (interior) routing protocol, IS-IS uses hello packets to discover adjacent routers (intermediate systems) and to detect the loss of communication with them.</p>
<p>Unlike OSPF, where the hello timers must match between neighbors, IS-IS allows each router to define its own hold time (the time after which it is considered unreachable). The <em>advertised hold time</em> is the only parameter relevant in the neighbor loss detection; it&rsquo;s up to the IS-IS implementation what the hello interval is and how many hello packets are sent within the hold time.</p>
<p>In this lab exercise, you will reduce the IS-IS timers on the remote routers (R1, R2) to speed up neighbor loss detection on the Core router. You will also explore other configurable timers.</p>
<p><img alt="Lab topology" src="../topology-timers.png" /></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Changing IS-IS hello timers should be a last resort. If you want to improve the failure detection speed, use BFD.</p>
</div>
<h2 id="device-requirements">Device Requirements</h2>
<ul>
<li>Use any device <a href="https://netlab.tools/platforms/#platform-routing-support">supported by the <em>netlab</em> IS-IS configuration module</a> for the routers in your lab.</li>
<li>You can do automated lab validation when using Arista EOS on your routers<sup id="fnref:FRSAT"><a class="footnote-ref" href="#fn:FRSAT">1</a></sup>.</li>
</ul>
<h2 id="starting-the-lab">Starting the Lab</h2>
<p>You can start the lab <a href="../../1-setup/">on your own lab infrastructure</a> or in <a href="https://github.com/codespaces/new/bgplab/isis">GitHub Codespaces</a> (<a href="https://bgplabs.net/4-codespaces/">more details</a>):</p>
<ul>
<li>Change directory to <code>feature/6-timers</code></li>
<li>Execute <strong>netlab up</strong>. You&rsquo;ll get a lab with IPv4 addresses configured on all interfaces and level-2 IS-IS routing configured on all routers.</li>
<li>Log into lab routers with <strong>netlab connect</strong> and verify their configuration.</li>
</ul>
<h2 id="initial-state">Initial State</h2>
<p>Most IS-IS implementations advertise a 30-second <em>hold interval</em>  but differ significantly in their hello intervals. For example, by default, FRRouting sends IIH (IS-IS Hello) packets every three seconds, while Arista EOS sends them every ten seconds.</p>
<p>Some platforms show the configured IIH timers in the <strong>show isis interface</strong> commands:</p>
<p class="code-caption">The <strong>show isis interface</strong> command on FRRouting displays the hello timers<br /></p>
<pre><code>r1# show isis interface detail
Area Gandalf:
  Interface: eth1, State: Up, Active, Circuit Id: 0x0
    Type: p2p, Level: L2
    Level-2 Information:
      Metric: 10, Active neighbors: 1
      Hello interval: 3, Holddown count: 10, Padding: yes
      CNSP interval: 10, PSNP interval: 2
    IP Prefix(es):
      10.1.0.1/30
</code></pre>
<p>To get the advertised <em>hold time</em> value, use the <strong>show isis neighbor</strong> command; some implementations include it in the printout.</p>
<p class="code-caption">The <strong>show isis neighbor detail</strong> command on Arista EOS displays the advertised hold time<br /></p>
<pre><code>r1#show isis neighbors detail

Instance  VRF      System Id        Type Interface          SNPA              State Hold time   Circuit Id
Gandalf   default  r2               L2   Ethernet1          P2P               UP    25          DB
  Area addresses: 49.0001
  SNPA: P2P
  Router ID: 0.0.0.0
  Advertised Hold Time: 30
  State Changed: 00:04:38 ago at 2025-03-12 16:36:58
  IPv4 Interface Address: 10.1.0.2
  IPv6 Interface Address: none
  Interface name: Ethernet1
  Graceful Restart: Supported
  Supported Address Families: IPv4
  Neighbor Supported Address Families: IPv4
</code></pre>
<h2 id="configuration-tasks">Configuration Tasks</h2>
<p>In our network, every remote router has a single uplink to the core router. Detecting neighbor loss on the remote routers is thus not as relevant as detecting remote site failure on the core router:</p>
<ul>
<li>Reduce the advertised hold time on the Core router to 15 seconds.</li>
<li>Reduce the advertised hold time on R1 and R2 to 3 seconds.</li>
<li>Most IS-IS implementations ask you to configure the interface parameters <strong>hello-interval</strong> and <strong>hello-multiplier</strong> (the advertised hold time is a product of these two parameters). Use whatever parameter values work for you.</li>
</ul>
<h2 id="validation">Validation</h2>
<p>You can use the <strong>netlab validate</strong> command if you&rsquo;re using <em>netlab</em> release 1.8.4 or later and run Arista EOS on the WAN router. This is the printout you should get after completing the lab exercise:</p>
<p><img alt="" src="../validate-timers.png" /></p>
<p>You could also manually validate your work. Inspect the details of IS-IS neighbors on all three routers and check the <em>advertised hold time</em>.</p>
<h2 id="beyond-neighbor-hold-times">Beyond Neighbor Hold Times</h2>
<p>Most IS-IS implementations have several SPF-, LSP-, and CSNP-related timers you can tweak to improve your network&rsquo;s convergence. While setting these timers to low values is tempting, you always have to find the right balance between convergence speed, routing protocol overhead (excessive flooding and CPU utilization), and network instability due to overly quick reactions to partially updated information (<a href="https://blog.ipspace.net/2019/06/know-thy-environment-before-redesigning/">example</a>).</p>
<p>These are the usual timers you can tweak:</p>
<p><strong>SPF interval</strong></p>
<p style="margin-left: 2rem">This parameter changes the maximum interval between SPF runs. It directly impacts the convergence speed and is set to conservative values in implementations with enough history, as they had to work on very slow CPUs. Most modern IS-IS implementations use reasonable values for SPF interval.<br /></p>
<p><strong>LSP generation</strong></p>
<p style="margin-left: 2rem">The interval between the generation of changed LSPs. This parameter should not be set too low, as it prevents your router from flooding the network with too many changes generated by a flapping interface. However, it might also impact the speed with which changes in network topology or redistributed routes are advertised in IS-IS.<br /></p>
<p><strong>CSNP generation</strong></p>
<p style="margin-left: 2rem">IS-IS uses periodic CSNP packets (table-of-contents of the LSP database) to detect missing information. Sending them more often will improve recovery from lost LSP updates. However, if the LSP packet loss significantly impacts your network convergence, you have much bigger problems to fix than the CSNP interval.<br /></p>
<p>You can find further network-convergence-related information in the <a href="https://blog.ipspace.net/series/fast-failover/">Fast Failover</a> series of blog posts.</p>
<p><strong>Next</strong>: <a href="../7-redistribute/">Route Redistribution into IS-IS</a></p>
<h2 id="reference-information">Reference Information</h2>
<h3 id="lab-wiring">Lab Wiring</h3>
<table>
<thead>
<tr>
<th>Origin Device</th>
<th>Origin Port</th>
<th>Destination Device</th>
<th>Destination Port</th>
</tr>
</thead>
<tbody>
<tr>
<td>r1</td>
<td>Ethernet1</td>
<td>core</td>
<td>Ethernet1</td>
</tr>
<tr>
<td>r2</td>
<td>Ethernet1</td>
<td>core</td>
<td>Ethernet2</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> The interface names depend on the devices you use in the lab. The printout was generated with lab devices running Arista EOS.</p>
<h3 id="lab-addressing">Lab Addressing</h3>
<table>
<thead>
<tr>
<th>Node/Interface</th>
<th style="text-align: right;">IPv4 Address</th>
<th style="text-align: right;">IPv6 Address</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>core</strong></td>
<td style="text-align: right;">10.0.0.2/32</td>
<td style="text-align: right;"></td>
<td>Loopback</td>
</tr>
<tr>
<td>Ethernet1</td>
<td style="text-align: right;">10.1.0.1/30</td>
<td style="text-align: right;"></td>
<td>core -&gt; r1</td>
</tr>
<tr>
<td>Ethernet2</td>
<td style="text-align: right;">10.1.0.5/30</td>
<td style="text-align: right;"></td>
<td>core -&gt; r2</td>
</tr>
<tr>
<td><strong>r1</strong></td>
<td style="text-align: right;">10.0.0.1/32</td>
<td style="text-align: right;"></td>
<td>Loopback</td>
</tr>
<tr>
<td>Ethernet1</td>
<td style="text-align: right;">10.1.0.2/30</td>
<td style="text-align: right;"></td>
<td>r1 -&gt; core</td>
</tr>
<tr>
<td><strong>r2</strong></td>
<td style="text-align: right;">10.0.0.3/32</td>
<td style="text-align: right;"></td>
<td>Loopback</td>
</tr>
<tr>
<td>Ethernet1</td>
<td style="text-align: right;">10.1.0.6/30</td>
<td style="text-align: right;"></td>
<td>r2 -&gt; core</td>
</tr>
</tbody>
</table>
<div class="footnote">
<hr />
<ol>
<li id="fn:FRSAT">
<p>FRRouting does not display the advertised hold time in the <strong>show isis neighbors</strong> command and thus cannot provide the information needed for the automated validation.&#160;<a class="footnote-backref" href="#fnref:FRSAT" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div></div>
            </div>
        </div>

        <footer class="col-md-12">
<hr>
    <p>(C) 2023â€“2025 Ivan Pepelnjak (ipSpace.net AG) and contributors</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
